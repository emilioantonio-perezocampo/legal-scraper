# ===========================================
# Legal Scraper - Supabase Integration
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env with real secrets

# ===========================================
# Feature Flags
# ===========================================

# Enable Supabase persistence (default: false for backwards compatibility)
ENABLE_SUPABASE_PERSISTENCE=false

# Enable dual-write mode: write to both JSON and Supabase (safe for migration)
# Only applies when ENABLE_SUPABASE_PERSISTENCE=true
ENABLE_DUAL_WRITE=true

# Enable real-time job monitoring via Supabase Realtime
ENABLE_REALTIME_UPDATES=false

# ===========================================
# Supabase Connection
# Required when ENABLE_SUPABASE_PERSISTENCE=true
# ===========================================

# Supabase project URL (e.g., https://project.supabase.co)
SUPABASE_URL=https://your-project.supabase.co

# Public anonymous key (safe for client-side, subject to RLS)
SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (bypasses RLS, KEEP SECRET)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ===========================================
# Database Direct Connection
# Used for bulk operations, vector search, and asyncpg
# ===========================================

# PostgreSQL host (use 'localhost' for local Supabase)
SUPABASE_DB_HOST=localhost

# PostgreSQL port (default: 5432)
SUPABASE_DB_PORT=5432

# Database name (default: postgres)
SUPABASE_DB_NAME=postgres

# Database password (KEEP SECRET)
SUPABASE_DB_PASSWORD=your-db-password-here

# ===========================================
# Storage Configuration
# ===========================================

# Supabase Storage bucket for PDF files
SCRAPER_PDF_BUCKET=legal-scraper-pdfs

# ===========================================
# Vector Search (pgvectorscale)
# ===========================================

# Query tuning: search list size (higher = more accurate, slower)
# Default: 100, Range: 10-1000
VECTORSCALE_SEARCH_LIST_SIZE=100

# Query tuning: rescore candidates (0 to disable reranking)
# Default: 50
VECTORSCALE_QUERY_RESCORE=50

# ===========================================
# Security (Development Only)
# ===========================================

# Allow HTTP URLs for Supabase (ONLY for local development)
# Set to 'true' when using local Supabase without TLS
SUPABASE_ALLOW_INSECURE=false
