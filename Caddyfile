# Caddyfile for Internal Routing
# SSL/TLS is handled by Kong - this serves as internal router only

:80 {
    encode gzip

    # API routes to FastAPI backend
    reverse_proxy /api/* api:8000
    reverse_proxy /downloads/* api:8000

    # Reflex WebSocket backend (the UI runs both frontend on 3000 and backend on 8000)
    reverse_proxy /_event* legal-scraper-ui:8000

    # Default route to Reflex UI frontend
    reverse_proxy legal-scraper-ui:3000
}
