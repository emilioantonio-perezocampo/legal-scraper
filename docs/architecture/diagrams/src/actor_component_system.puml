@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

Container_Boundary(gui_app, "GuiApplication") {
    Component(main_window, "MainWindow", "Tkinter", "User Interface for job control")
    
    Component(scraper_service, "ScraperService", "Python Service", "Orchestrates Use Cases and Actors")
    
    Component(gui_controller, "GuiControllerActor", "BaseActor", "Mediator between UI and Backend")
    Component(gui_state, "GuiStateActor", "BaseActor", "Manages Job State (IDLE, RUNNING)")
    Component(gui_bridge, "GuiBridgeActor", "BaseActor", "Translates GUI commands to Scraper messages")
}

Container_Boundary(backend, "Scraper Backend (Infrastructure)") {
    Component(scheduler, "SchedulerActor", "BaseActor", "Orchestrates workers")
    Component(discovery, "DofDiscoveryActor", "BaseActor", "Scouts URLs from Indexes")
    Component(scraper, "DofScraperActor", "BaseActor", "Fetches and Parses HTML")
    Component(persistence, "PersistenceActor", "BaseActor", "Saves JSON to Disk")
}

Rel(main_window, scraper_service, "Calls methods", "Sync")
Rel(scraper_service, gui_controller, "Starts/Stops", "Async")
Rel(scraper_service, gui_bridge, "Starts/Stops", "Async")

Rel(gui_controller, gui_state, "Updates Job Status", "Ask/Tell")
Rel(gui_controller, gui_bridge, "Forwards Start Command", "Tell")

Rel(gui_bridge, discovery, "Sends DISCOVER_X", "Tell")
Rel(scheduler, discovery, "Registers/Triggers", "Tell")

Rel(discovery, scraper, "Feeds URLs", "Tell")
Rel(scraper, persistence, "Sends SAVE_LAW", "Tell")

@enduml
